---
title: "Post Format"
search: false
category:
  - post-format
last_modified_at: 2100-01-01T23:55:00
---

<br/>

#### RECOMMEND POSTS BEFORE THIS

## 0. 들어가면서

* JCL(Jakarta Commons Logging) - 추상화 라이브러리
* 로깅 라이브러리 선택은 어플리케이션 개발자

* JCL 로깅 구현체를 찾는 방법
    * 설정 파일에서 찾기
    * 어플리케이션 클래스 패스에서 Log4J 구현체 찾기
    * 어플리케이션이 JDK 1.4에서 구동 중인지 확인하기
    * 아무것도 못 찾았으면 기본 구현체 사용하기

* JCL 사용시 겪을 수 있는 문제
    * Java 클래스 로더 기본 동작 방식
        * <https://articles.qos.ch/classloader.html>
    * 서블릿 컨테이너의 클래스 로더 동작 방식
        * <>
    * 메모리 누수 문제
    * 스프링 개발자 - 과거로 돌아갈 수 있다면...
        * <https://spring.io/blog/2009/12/04/logging-dependencies-in-spring>

* SLF4J
    * Simple Logging Facade For Java
    * 로깅 라이브러리를 런타임이 아닌 컴파일 타임에 지정한다
    * 세가지 모듈을 사용한다.
        * bridge
        * apis
        * binding

* apis
    * 로깅 인터페이스
    * org.slf4j.Logger
    * org.slf4j.LoggerFactory
    * <https://www.slf4j.org/faq.html#string_or_object>

* binding 
    * slf4j 인터페이스를 로깅 구현체에 연결
    * 어댑터 역할
    * SLF4J 인터페이스를 직접 구현한 구현체도 있음
    * 라이브러리나 프레임워크는 사용하지 마라
    * 여러 바인딩 중 반드시 한가지만 사용
        * slf4j-log4j-version.jar
        * slf4j-log4j2-version.jar
        * slf4j-jdk14-version.jar
        * slf4j-nop-version.jar
        * slf4j-jcl-version.jar
        * logback-classic-version.jar
* 여러 바인딩을 클래스 패스에 두면 문제 발생

* slf4j bridge
    * 로거 호출을 SLF4J 인터페이스로 연결
    * Log4J > SLF4J API
    * 어떤 컴포넌트가 구체적인 로거에 의존하면서 고쳐줄 기미가 보이지 않는다면
    * 해당 로거 호출을 대신 받아서 SLF4J API를 호출해준다.

* JCL 호출을 SLF4J로 연결
    * jcl-over-slf4j.jar 추가(bridge)
        * JCL 호출을 받아서 SLF4J API 호출
        * JCL 인터페이스를 구현하고 있음
    * 의존성에서 commons-logging.jar 제거
    * sl4j-jcl.jar와 함께 사용하면 무한 루프(binding)

* jul-to-slf4j.jar 추가(bridge)
    * java.util.logging은 교체 불가능
    * LogRecord 객체를 사용해서 위임
* slf4j-jdk14.jar 같이 쓰면 무한 루프(binding)

* 로깅 전략
  * logging.file / logging.path 설정을 사용해서 파일 출력을 사용한다.
  * 10M 단위로 로그 파일을 새로 만든다.
  * 롤링 파일 어팬더

## CLOSING

#### TEST CODE REPOSITORY

#### RECOMMEND NEXT POSTS

#### REFERENCE

* <https://www.slideshare.net/whiteship/ss-47273947>
* <https://www.slf4j.org/legacy.html>