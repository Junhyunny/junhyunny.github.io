---
title: "Thymeleaf - Cannot found images"
search: false
category:
  - spring-boot
last_modified_at: 2021-08-10T03:00:00
---

<br>

클라이언트가 요청한 특정 문자열에 해당하는 바코드 이미지를 생성한 후 페이지에 담아 반환하는 기능에서 서버가 이미지를 찾지 못하는 문제가 발생하였습니다. 
조금 자세히 문제 현상에 대해 설명하면 다음과 같습니다. 
- `static/images/` 폴더에 기존에 저장되어 있던 이미지는 잘 찾는다.
- 클라이언트 요청으로 `static/images/` 폴더에 새롭게 생성한 이미지는 찾지 못한다.

<p align="center"><img src="/images/cannot-find-static-resource-1.JPG" width="75%"></p>
<center>이미지 출처, https://post.naver.com/viewer/postView.nhn?volumeNo=17690733&memberNo=32787874</center><br>

처음엔 서버의 정적 자원(static resource)가 캐싱(caching)되어 있을 것으로 예상하여 관련된 설정을 확인해보았지만 해결책을 찾지 못했습니다. 
동적으로 생성되는 이미지 자원을 서비스하지 못한다는 내용의 에러를 찾아보는 중 `StackOverFlow`에서 해결의 실마리를 찾았습니다. 

<p align="center"><img src="/images/cannot-find-static-resource-2.JPG" width="75%"></p>
<center>이미지 출처, https://stackoverflow.com/questions/45651119/spring-boot-images-uploading-and-serving</center><br>

요약하자면 다음과 같습니다.
- 보통 `static/images/` 폴더를 이미지 저장에 사용한다.
- `Thymeleaf`는 `static/images` 폴더에 랜더링(rendering)에 필요한 정적인 이미지들이 있다고 예상한다. 
- `static/images/` 폴더에 업로드한(동적인) 컨텐츠를 올리는 것은 좋지 않은 방식이다.


## OPINION
작성 중 입니다.

#### TEST CODE REPOSITORY
- <https://github.com/Junhyunny/blog-in-action>

#### REFERENCE
- <https://stackoverflow.com/questions/45651119/spring-boot-images-uploading-and-serving>
- <https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.developing-web-applications.spring-mvc.static-content>