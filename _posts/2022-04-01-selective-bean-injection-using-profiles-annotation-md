---
title: "@Profile 애너테이션을 사용한 선택적 빈(bean) 주입"
search: false
category:
  - spring-boot
last_modified_at: 2022-03-31T23:55:00
---

<br>

## 0. 들어가면서

서비스를 개발하다보면 서비스가 배포될 환경에 맞는 적절한 설정 주입이 필요합니다. 
스프링 프레임워크에선 `application-{배포환경}.yml`처럼 설정 파일을 환경에 맞게 나눠 사용할 수 있습니다. 
마찬가지로 빈(bean)도 배포 환경에 맞는 빈을 선택적으로 주입받아 사용할 수 있습니다. 
이번 포스트에서는 환경을 나누고 이에 맞는 적절한 빈을 주입받는 방법을 정리해보았습니다. 

## 1. 적용 시나리오

다음과 같은 상황이라고 가정해보겠습니다. 
- 개발자 A는 현재 B 서비스의 API를 호출하는 기능을 개발하는 중 입니다. 
- B 서비스 개발 팀에 문의해보니 아직 API 기능 개발이 완료되지 않았다고 합니다. 
- 개발자 A는 B 서비스로부터 획득한 데이터를 이용하여 다음 기능들을 개발해야 합니다. 
- B 서비스의 API 기능 개발이 끝나길 기다릴 수 없으니 응답 메세지 샘플을 먼저 받았습니다. 
- 개발자 A는 로컬에선 API 응답 메세지 샘플을 사용하고, 개발 환경에 배포하면 실제 API 요청을 수행하고 싶습니다. 

## 2. PokeMonProxy 인터페이스 만들기

비즈니스 로직에서 사용할 프록시 인터페이스를 생성합니다. 
B 서비스에서 포켓몬 정보를 조회하는 기능입니다.

```java

```

## 3. PokeMonProxy 구현체 만들기

### 3.1. LocalPokeMonProxy 클래스

### 3.2. DefaultPokeMonProxy 클래스

##### PokeMonProxy 상속 클래스 다이어그램

## 4. application.yml 설정 환경 분할

## 5. 테스트 코드

#### TEST CODE REPOSITORY
- <>

#### REFERENCE
- <>