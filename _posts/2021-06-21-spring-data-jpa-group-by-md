---
title: "JPA GROUP BY 사용 시 ConverterNotFoundException 발생"
search: false
category:
  - spring-boot
  - jpa
  - junit
last_modified_at: 2021-06-21T00:00:00
---

<br>

통계성 데이터를 보여줄 때 가장 먼저 찾는 방법은 SQL의 `GROUP BY` 입니다. 
대부분의 데이터 처리를 SQL이 아닌 비즈니스 로직에서 해결하지만 통계성 데이터는 역시 SQL을 이용하는 것이 여러모로 편리한 것 같습니다. 
JPA를 사용하고 처음으로 `GROUP BY` 키워드가 들어간 SQL을 사용했을 때 이런 Exception을 마주쳤습니다. 

```
org.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [org.springframework.data.jpa.repository.query.AbstractJpaQuery$TupleConverter$TupleBackedMap] to type [com.geneuin.ksystem.common.domain.vo.ContainerGroupByItemGroup]
```

음...🧐 딱 보았을 때 spring-data-jpa 에서 반환하는 타입이 제가 지정한 타입으로 자동 변환되지 않는 듯 합니다. 
에러를 해결하기 위한 방법이 세 가지 존재합니다. 
관련된 내용들을 정리해보겠습니다.

## Error Case
우선 어떤 케이스에서 에러가 발생하는지 확인해보겠습니다. 


## Use Object[]

> JPA queries typically produce their results as instances of a mapped entity. 
> However, queries with aggregation functions normally return the result as Object[].

JPA 쿼리는 Entity 객체를 결과로 만들지만 집계 함수가 있는 쿼리의 경우 Object 배열을 반환한다고 합니다. 
Object 배열을 사용하는 경우 Exception이 없는지


## Custom Class With JPQL

## Interface With Native Query



## OPINION

#### REFERENCE
- <https://algorithmstudy-mju.tistory.com/153>
- <https://www.baeldung.com/jpa-queries-custom-result-with-aggregation-functions>